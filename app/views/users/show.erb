<%= content_tag :div, '', :class => "container-fluid" do %>
  <%= content_tag :div, '', :class => "row" do %>

    <%= content_tag :nav, '', :class => "col-md-2 d-none d-md-block bg-light sidebar" do %>
          <%= content_tag :div, '', :class => "sidebar-sticky" do %>
            <%= content_tag :ul, '', :class => "nav flex-column" do %>
              <%= content_tag :li, '', :class => "nav-item" do %>
              <%= content_tag :p %>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <%= link_to "New Budget", new_user_planner_path(@user.id) %> <span class="sr-only">(current)</span>
              <%= content_tag :p %>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
                <%= link_to "YTD Savings", user_savings_path(@user) %>
              <%= content_tag :p %>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-shopping-cart"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                <%= link_to "YTD Expenses", user_expenses_path(@user) %>
              <%= content_tag :p %>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                <%= link_to "YTD Investments", new_user_path %>
              <%= content_tag :p %>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bar-chart-2"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                <%= link_to "Channels", new_user_path %>
              <%= content_tag :p %>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-person-lines-fill" viewBox="0 0 16 16"><path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"/></svg>            <%= link_to "Profile", edit_user_path(@user) %>
              <%= content_tag :p %>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-door-closed" viewBox="0 0 16 16"><path d="M3 2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v13h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V2zm1 13h8V2H4v13z"/><path d="M9 9a1 1 0 1 0 2 0 1 1 0 0 0-2 0z"/></svg>
                <%= link_to "Log Out", logout_path %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
   
    <%= content_tag :main, '', :class => "col-md-9 ml-sm-auto col-lg-10 px-4" do %>
        <%= content_tag :div, '', :class => "d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom" do %>
          <%= content_tag :h4, "Hey, #{@user.name.capitalize}", :class => "display-4" %>
          <%= content_tag :div, '', :class => "btn-toolbar mb-2 mb-md-0" do %>
            <%= content_tag :button, '', :class => "btn btn-sm btn-outline-secondary" do %>
     
               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                <% if @user.planners.any? %>
                  <%= link_to @user.planners.last.month, user_planner_path(@user,@user.planners.last) %>
                <% end %>
          <% end %>
        <% end %>
      <% end %>
      <%= content_tag :h2, "Budgets" %>
      <%= content_tag :div, '', :class => "table-responsive" do %>
        <% content_tag :table, '', :class => "table table-striped table-sm" do %>
          <%= content_tag :thead do %>
            <%= content_tag :tr do %>
              <th>Month</th>
              <th>Total Income</th>
              <th>Total Savings</th>
              <th>Total Expenses</th>
              <th>Remaining Total</th>
            <% end %>
          <% end %>
          <%= content_tag :tbody do %>
            <% @user.planners.each do |p| %>
              <%= content_tag :tr do %>
                  <td> <%= link_to p.month, user_planner_path(@user,p) %> </td>
                  <td> $<%= p.total_incomes %> </td>
                  <td> $<%= p.total_savings %> </td>
                  <td> $<%= p.total_expenses %> </td>
                  <td> $<%= p.total_incomes - (p.total_savings + p.total_expenses) %> </td>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>  
<% end %>
  
  
  

          <%# MAKE A MODEL METHOD THAT WILL QUERY CLASS ITSELF FOR TOTAL INCOME, TOTAL EXPENSES, TOTAL SAVINGS %>